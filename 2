"use client"
import { inter, jetbrains } from '@/app/ui/fonts';
import CourseSelect from '@/app/ui/CourseSelect';
import { PiChair } from "react-icons/pi";
import { Course } from '@/app/lib/definitions';
import React from 'react';
import { TbPackageExport } from "react-icons/tb";


import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"


import { Button } from "@/components/ui/button";
import ExportDrawer from './ui/ExportDrawer';

export default function Home() {
  const [selectedCourses, setSelectedCourses] = React.useState<Course[]>([]);
  console.log(selectedCourses);
  const handleSelection = function(course: Course) {
    if (!selectedCourses.some(item => item.name === course.name)) {
      setSelectedCourses([...selectedCourses, course]);
    }
  }
  return <div className="relative min-h-screen flex flex-col items-center text-white">
    <div className="fixed inset-0 -z-10 before:content-[''] before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_top_left,_#fa7b007f_0%,_transparent_28%)] before:opacity-100 "></div>

    <main className="flex-grow w-full flex flex-col items-center">

      <Drawer>
        <DrawerTrigger>
          <div className={`w-full h-[100px] sticky top-0 flex flex-col items-center`}>
            <div className={` h-full relative w-1/2 flex justify-end items-center `}>
              <button
                className={`flex justify-center items-center`}>
                <span><TbPackageExport size={"40px"} /></span>
                {selectedCourses.length !== 0 &&
                  <span className={`bg-orange-600 w-5 h-5 rounded-full ${inter.className} flex justify-center items-center `}><strong>{selectedCourses.length}</strong></span>
                }
              </button>
            </div>
          </div>
        </DrawerTrigger>
        <DrawerContent>
          <DrawerHeader className={`w-1/2`}>
            <DrawerTitle>Are you absolutely sure?</DrawerTitle>
            <DrawerDescription>This action cannot be undone.</DrawerDescription>
          </DrawerHeader>
          <DrawerFooter className={`w-[200px]`}>
            <Button>Submit</Button>
            <DrawerClose>
              <Button variant="outline">Cancel</Button>
            </DrawerClose>
          </DrawerFooter>
        </DrawerContent>
      </Drawer>
      <ExportDrawer />
      <Hero />
      <CourseSelect updateSelectedCourses={handleSelection} />
    </main >
  </div >
}




function Hero() {
  return (
    <div className={`h-[500px] flex flex-col items-center justify-end`}>
      <div
        className={`text-8xl font-bold text-center flex  p-4 ${jetbrains.className}`}
      ><span>Sea</span> <PiChair color={"#ea580c"} /> <span>Koi</span></div>
      <div
        className={`text-2xl my-3 ${inter.className}`}
      >Exam Room finder for the students of <strong>United International University</strong>.</div>
      <div>
        <span className={`text-lg ${inter.className} flex items-center justify-center bg-orange-600 px-2 py-1 rounded-full`}>Updated Fall 2024</span>
      </div>
    </div>
  )
}
